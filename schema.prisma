// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                 String         @id @default(cuid())
  name               String         @default("")
  nameLast           String         @default("")
  authId             String         @unique @default("")
  image              String         @default("")
  phone              String         @default("")
  email              String         @unique @default("")
  password           String         @default("")
  url                String         @default("")
  isActive           Boolean        @default(true)
  stripeCustomerId   String         @default("")
  dateCreated        DateTime?      @default(now())
  dateModified       DateTime?      @default(now())
  buisnessHourOpen   String?        @default("09:00:00")
  buisnessHourClosed String?        @default("18:00:00")
  role               Role?          @relation("User_role", fields: [roleId], references: [id])
  roleId             String?        @map("role")
  posts              Post[]         @relation("Post_author")
  pages              Page[]         @relation("Page_author")
  privatePagesAccess Page[]         @relation("Page_privateAccess")
  privatePostsAccess Post[]         @relation("Post_privateAccess")
  servicesProvided   Service[]      @relation("Service_employees")
  bookings           Booking[]      @relation("Booking_customer")
  gigs               Booking[]      @relation("Booking_employees")
  gig_requests       Booking[]      @relation("Booking_employee_requests")
  availability       Availability[] @relation("Availability_employee")
  addons             Addon[]        @relation("Addon_author")

  @@index([stripeCustomerId])
  @@index([roleId])
}

model Role {
  id                         String  @id @default(cuid())
  name                       String  @unique @default("")
  label                      String  @unique @default("")
  description                String  @default("")
  canViewUsers               Boolean @default(false)
  canManageUsers             Boolean @default(false)
  canManageRoles             Boolean @default(false)
  canManagePages             Boolean @default(false)
  canManagePosts             Boolean @default(false)
  canCreatePosts             Boolean @default(false)
  canManageCategories        Boolean @default(false)
  canManageTags              Boolean @default(false)
  canManageAnnouncements     Boolean @default(false)
  canManageProducts          Boolean @default(false)
  canViewProducts            Boolean @default(false)
  canManageAddons            Boolean @default(false)
  canManageBookings          Boolean @default(false)
  canManageAvailability      Boolean @default(false)
  canCreateAvailability      Boolean @default(false)
  canManageEvents            Boolean @default(false)
  canManageTickets           Boolean @default(false)
  canManageCart              Boolean @default(false)
  canManageOrders            Boolean @default(false)
  canManageLocations         Boolean @default(false)
  canViewPrivateLocations    Boolean @default(false)
  canManageServices          Boolean @default(false)
  canManageSubscriptionPlans Boolean @default(false)
  canManageSubscriptionItems Boolean @default(false)
  canManageCoupons           Boolean @default(false)
  assignedTo                 User[]  @relation("User_role")
}

model Post {
  id             String     @id @default(cuid())
  title          String     @default("")
  slug           String     @unique @default("")
  dateCreated    DateTime?  @default(now())
  dateModified   DateTime?  @default(now())
  status         String?    @default("DRAFT")
  template       String?    @default("FULLWIDTH")
  pinned         Int?       @default(0)
  excerpt        String     @default("")
  featured_image String     @default("")
  featured_video String     @default("")
  content        Json       @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  author         User?      @relation("Post_author", fields: [authorId], references: [id])
  authorId       String?    @map("author")
  privateAccess  User[]     @relation("Post_privateAccess")
  categories     Category[] @relation("Category_posts")
  tags           Tag[]      @relation("Post_tags")

  @@index([authorId])
}

model Page {
  id             String     @id @default(cuid())
  title          String     @default("")
  slug           String     @unique @default("")
  dateCreated    DateTime?  @default(now())
  dateModified   DateTime?  @default(now())
  status         String?    @default("DRAFT")
  template       String?    @default("FULLWIDTH")
  pinned         Int?       @default(0)
  excerpt        String     @default("")
  featured_image String     @default("")
  featured_video String     @default("")
  content        Json       @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  author         User?      @relation("Page_author", fields: [authorId], references: [id])
  authorId       String?    @map("author")
  privateAccess  User[]     @relation("Page_privateAccess")
  categories     Category[] @relation("Category_pages")
  tags           Tag[]      @relation("Page_tags")

  @@index([authorId])
}

model Category {
  id        String     @id @default(cuid())
  name      String     @unique @default("")
  excerpt   String     @default("")
  posts     Post[]     @relation("Category_posts")
  pages     Page[]     @relation("Category_pages")
  addons    Addon[]    @relation("Addon_categories")
  services  Service[]  @relation("Category_services")
  locations Location[] @relation("Category_locations")
}

model Tag {
  id        String     @id @default(cuid())
  name      String     @unique @default("")
  posts     Post[]     @relation("Post_tags")
  pages     Page[]     @relation("Page_tags")
  addons    Addon[]    @relation("Addon_tags")
  services  Service[]  @relation("Service_tags")
  locations Location[] @relation("Location_tags")
}

model Announcement {
  id         String    @id @default(cuid())
  link       String    @default("")
  start      DateTime?
  end        DateTime?
  colorTheme String?   @default("bg_c_plain")
  type       String?   @default("NORMAL")
  content    Json      @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
}

model Booking {
  id                String    @id @default(cuid())
  start             DateTime
  end               DateTime
  timeZone          String    @default("America/Chicago")
  address           String    @default("")
  price             Int       @default(0)
  service           Service?  @relation("Booking_service", fields: [serviceId], references: [id])
  serviceId         String?   @map("service")
  location          Location? @relation("Booking_location", fields: [locationId], references: [id])
  locationId        String?   @map("location")
  addons            Addon[]   @relation("Addon_bookings")
  employees         User[]    @relation("Booking_employees")
  employee_requests User[]    @relation("Booking_employee_requests")
  customer          User?     @relation("Booking_customer", fields: [customerId], references: [id])
  customerId        String?   @map("customer")
  email             String    @default("")
  phone             String    @default("")
  name              String    @default("")
  status            String?   @default("LEAD")
  details           Json      @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  notes             String    @default("")
  secretNotes       String    @default("")
  revision          Int       @default(0)
  dateCreated       DateTime? @default(now())
  dateModified      DateTime? @default(now())
  google            Json?     @default("{\"id\":\"\",\"status\":\"\",\"kind\":\"\",\"htmlLink\":\"\"}")

  @@index([serviceId])
  @@index([locationId])
  @@index([customerId])
}

model Location {
  id         String     @id @default(cuid())
  name       String     @unique @default("")
  address    String     @unique @default("")
  rooms      Int        @default(1)
  status     String?    @default("PRIVATE")
  notes      String     @default("")
  services   Service[]  @relation("Location_services")
  bookings   Booking[]  @relation("Booking_location")
  categories Category[] @relation("Category_locations")
  tags       Tag[]      @relation("Location_tags")
}

model Availability {
  id           String    @id @default(cuid())
  start        DateTime
  end          DateTime
  employee     User?     @relation("Availability_employee", fields: [employeeId], references: [id])
  employeeId   String?   @map("employee")
  type         String?   @default("VACATION")
  status       String?   @default("APPROVED")
  dateCreated  DateTime? @default(now())
  dateModified DateTime? @default(now())

  @@index([employeeId])
}

model Service {
  id                 String     @id @default(cuid())
  name               String     @unique @default("")
  image              String     @default("")
  excerpt            String     @default("")
  description        Json       @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  price              Int?       @default(0)
  durationInHours    Decimal    @default("6") @postgresql.Decimal(5, 2)
  buisnessHourOpen   String?    @default("09:00:00")
  buisnessHourClosed String?    @default("18:00:00")
  buisnessDays       Json       @default("[0,1,2,3,4,5,6]")
  status             String?    @default("DRAFT")
  addons             Addon[]    @relation("Addon_services")
  employees          User[]     @relation("Service_employees")
  locations          Location[] @relation("Location_services")
  bookings           Booking[]  @relation("Booking_service")
  categories         Category[] @relation("Category_services")
  tags               Tag[]      @relation("Service_tags")
  dateCreated        DateTime?  @default(now())
  dateModified       DateTime?  @default(now())
}

model Addon {
  id              String     @id @default(cuid())
  name            String     @unique @default("")
  slug            String     @unique @default("")
  image           String     @default("")
  excerpt         String     @default("")
  price           Int        @default(0)
  stripeProductId String     @default("")
  status          String?    @default("PUBLIC")
  author          User?      @relation("Addon_author", fields: [authorId], references: [id])
  authorId        String?    @map("author")
  services        Service[]  @relation("Addon_services")
  bookings        Booking[]  @relation("Addon_bookings")
  categories      Category[] @relation("Addon_categories")
  tags            Tag[]      @relation("Addon_tags")
  dateCreated     DateTime?  @default(now())
  dateModified    DateTime?  @default(now())

  @@index([authorId])
}
